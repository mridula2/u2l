#!/bin/sh
#
# $Header: /data/cvsrepo/assess-tools/bin/1001_optionchkall,v 1.2 2013/06/24 05:25:11 miya Exp $
# $Name: rev_1_10 $
#
# ツール名 : 1001_optionchkall
# 概要     : Makefile で修正が必要なオプションを出力する
# 実行方法 : 1001_optionchkall filelist
# 入力	   : filelist : Makefile リスト
# 出力     : 検出された使用オプションを sort +uniq -c で数とパターンで出力

if [ $# -ne 1 ];
then
	echo "Usage : $0 filelist"
	exit 1
fi

if [ -f $1 ];
then
	FILELIST=$1
else
	echo "Not found $1"
	exit 1
fi

optionchk() {
	opt=$1

	echo "Checking \"$opt\" option"
	$PJHOME/bin/1002_optionchk $opt $FILELIST \
				| cut -d: -f3 | sort | uniq -c
}

optionchk -G
optionchk -Xc
