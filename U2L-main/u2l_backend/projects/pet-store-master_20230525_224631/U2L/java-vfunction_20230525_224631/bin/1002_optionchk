#!/bin/sh
#
# $Header: /data/cvsrepo/assess-tools/bin/1002_optionchk,v 1.2 2013/06/24 05:26:44 miya Exp $
# $Name: rev_1_10 $
#
# ツール名 : 1002_optionchk
# 概要     : 指定されたオプションが Makefile 中にあるかを検索
# 実行方法 : 1002_optionchk opt filelist
# 入力	   : opt : 検索したいオプション
# 出力     : 検出された使用オプションを sort +uniq -c で数とパターンで出力

if [ $# -ne 2 ];
then
	echo "Usage : $0 opt filelist"
fi

if [ -f $2 ];
then
	FILELIST=$2
else
	echo "Not found $2"
	exit 1
fi

# - オプションの場合 '\' をつける
OPTION=$(echo "$1" | sed "s/-/\\\\-/")

cat $FILELIST | xargs grep -n "$OPTION" 
